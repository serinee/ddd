<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="index.css">
    <title>wishtrend02</title>
</head>

<body>
    <div id="contents">
        <div class="productlist_wrap">
            <div class="productlist">
                <!-- 상품 갯수 스크립트로 정할거니까 ,, 하나만 있으면 된다 ,,  -->



            </div>

            <div class="pop_quick_wrap">
                <div class="inner">
                
                    <div class="slider_wrap">
                        
                        <div class="top_slide_area">
                            <div class="top_slide">
                                <div class="big_img">
                                    <img src="" alt="">
                                </div>
                            </div>
                            <div class="btn_prev">
                                &lt;
                            </div>
                            <div class="btn_next">
                                &gt;
                            </div>
                            
                        </div>

                        <div class="bottom_slide_area">
                            <div class="bottom_slide">
                                <div class="small_img">
                                    <img src="" alt="">
                                </div>
                                
                            </div>
                            
                        </div>
                    </div>
                    <div class="info_wrap">
                        <div class="txt_area">
                            <div class="info_brand">
                                <h3></h3>
                            </div>
                            <div class="info_name">
                                <h3></h3>
                            </div>
                            <div class="rating">
                                <div class="count">
                                    <span></span>
                                </div>
                            </div>
                            <div class="info_price">
                                <h3>
                                    <p></p>
                                    <del></del>
                                    <span class="dc"></span>
                                </h3>
                            </div>
                            <div class="info_description">
                                <p></p>
                            </div>
                            <div class="view_detail">
                                <a href="#">VIEW DETAIL &gt;</a>
                            </div>

                        </div>
                        <div class="form_area">
                            <div class="select_wrap">
                                <form action="">
                                    <fieldset>
                                        <legend></legend>
                                        <div class="popselect">
                                            <div class="selected select_pdt">
                                                <a href="#">
                                                    <span>1 Mugwort Essence</span>
                                                </a>
                                                <ul class="options">
                                                    <li class="active"><a href="#">1 Mudeddddgwort Essence</a></li class="active">
                                                </ul>

                                                <select name="variation">
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                            <div class="selected select_num">
                                                <a href="#">
                                                    <span>1</span>
                                                </a>
                                                <ul class="options">
                                                    <li><a href="#">1</a></li>
                                                </ul>
                                                <select name="quantity">
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="btn_wrap">
                                            <div class="add_to_cart">
                                                <button type="button" class="btn_addcart">ADD TO CART</button>
                                            </div>
                                            <div class="wishlist">
                                                <button type="button" class="btn_wish"><span></span>WISHLIST</button>
                                            </div>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>

                        
                    </div>
                    <div class="pop_close">
                        <img src="images/closebtn.png" alt="">
                    </div>
                </div>
            </div>




            <div class="pagenavi_wrap">
                <div class="pagenav">
                    
                    <!-- <ul>
                        <li><a href="#">&lt;&lt;</a></li>
                        <li><a href="#">${makePage()}</a></li>
                        <li><a href="#">&gt;&gt;</a></li>
                    </ul> -->
                </div>

            </div>

            

        </div>
    </div>

    <script src="../js/jquery-3.4.1.min.js"></script>
    <script src="js/index03.js"></script>
    <script>
        // $(document).ready(function(){
        //     $('.product').hover(function(){
        //         $(this).toggleClass('on');
        //     });
        //     $('.btn_like').click(function(){
        //         $('.show').hide();
        //         $('.fill').show();
        //     });
        // })
        $(document).ready(function () {

            //     $('.pdt_thumb').mouseover(function(){
            //         $('.hover-img').css({visibility: "inherit", opacity:"1"});
            //         $('.quickshop').css({visibility: "inherit", opacity:"1", transform: "translate(0,-100%)"});
            //     });
            //     $('.pdt_thumb').mouseleave(function(){
            //         $('.hover-img').css({visibility: "hidden", opacity:"0"});
            //         $('.quickshop').css({visibility: "hidden", opacity:"0", transform: "translate(0,0)"});
            //     })

            //     $('.product').hover(function(){
            //         $(this).addClass('on');
            //     },function(){
            //         $(this).removeClass('on');
            //     });

            // $('.product').hover(function () {
            //     $(this).toggleClass('on');
            // });

            $(".productlist").on('mouseenter', '.product', function () {
                $(this).addClass('on');
            }).on('mouseleave', '.product', function () {
                $(this).removeClass('on');
            });

            $(".btn_like").on('click','.show', function () {
                $(this).toggle();
            });
            $(".btn_like").on('click','.fill', function () {
                $(this).toggle();
            });
        })

        let url = 'http://stage.wishtrend.com/wp-json/wt/v1/products/shop/all?sort=&page=1&offset=16';

        // jquery 의 ajax 메소드?
        // $.get / $.getJSON / $.post / $.ajax
        $.get(url, {}, function (response) {
            console.log(response);

            // var is_success;

            // if ( response.success === true ) {
            //     is_success = true;
            // } else {
            //     is_success = false;
            // }
            // 삼항연산자.
            // var is_success = ( response.success === true ? true : false );

            printProduct(response.data.products);

            printPage(response.data.max_page);
            
        });

        function printPage(page){
            $(".pagenav").empty();
            let max_page = page;
            console.log(max_page);

            for ( let i in page){
                let html = `
                <ul>
                    <li><a href="#">${printPage()}</a></li>
                </ul>
                `;

                $(".pagenav").append(html);  

                let page_html = '';
            
            for( let i = 0; i < max_page; i ++){
             `<li><a href="#">$</a></li>`
            }
            console.log(max_page)

            return `
             <ul>
                 ${page_html}
             </ul>
                 `;
         
         }


            }

            function makePage(paging){
            
        }
        

        // function printPage(page) {
        //     $(".pagenav").empty();
            
        //     console.log(max_page);
            
        // }

        // function makePage(pagelist){
        //     let max_page = page * 1;
        // }

        function printProduct(data) {

            $(".productlist").empty();

            for (let i in data) {

                let html = `
                <div class="product">
                    <a href="#">
                        <div class="pdt_thumb">
                            
                            <div class="img" style="background-image: url(https://www.wishtrend.com${data[i].thumbnail});"></div>
                            <div class="hover-img" style="background-image: url(https://www.wishtrend.com${data[i].thumbnail_hover});"></div>
                            <div class="quickshop">
                                <p>QUICKSHOP</p>
                            </div>
                            <div class="btn_like">
                                <span>
                                    <img class="show" src="images/ico_like.svg" alt="">
                                    <img class="fill" src="images/ico_like_color.svg" alt="">
                                </span>
                            </div>
                        </div>
                        <div class="pdt_info">
                            <!-- <div class="is_vegan">${data[i].is_vegan}</div> -->
                            <div class="info_brand">
                                <h3>${data[i].brand}</h3>
                            </div>
                            <div class="info_name">
                                <h3>${data[i].post_title}</h3>
                            </div>
                            
                            <div class="info_price">
                                <h3>
                                    ${price()}
                                </h3>
                            </div>
                        </div>
                        <div class="pdt_review">
                            <div class="rating">
                                ${makeStar(data[i].review_rating)}
                                <div class="count">
                                    <span></span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                `;
                

                $(".productlist").append(html);


                function price() {
                    let regular_price = data[i].regular_price * 1;
                    //console.log(regular_price);
                    let sale_price = data[i].sale_price * 1;
                    //console.log(sale_price);
                    let price_html = '';

                    let dc_price = Math.ceil(100 - (sale_price / regular_price * 100));
                    //console.log(dc_price);

                    if (regular_price === sale_price) {
                        price_html = `<p>$${regular_price.toFixed(2)}</p>`;
                    } else {
                        price_html = `
                                    <p>${'$' + data[i].sale_price}</p>
                                    <del>${'$' + regular_price.toFixed(2)}</del>
                                    <span class="dc">${dc_price + '%'}</span>`;
                    }

                    return `
                    <h3>
                    ${price_html}
                    </h3>
                    `;
                }
                //함수를 굳이 안써도 된다 ,, 
                // function price(){
                //     let price_html='';


                //     (regular_price == sale_price) ?
                //     '<p>'+ regular_price +'</p>':
                //     '<p>'+ sale_price + '</p>';


                // if ( regular_price == sale_price){
                //     '<p>'+regular_price+'</p>'
                // }else{
                //     '<del>'+ regular_price + '</del>'
                // }

                // }

                // let is_vegan = data[i].is_vegan;
                // if(is_vegan = 'Y'){
                //     true;
                // }else{
                //     false;
                // }
                // console.log(is_vegan);


           
                


            }
        }

        

        function makeStar(rating) {
            // 별점을 반올림 합니다.
            let star_rate = Math.ceil(rating); // 4

            let star_html = '';

            for (let i = 0; i < 5; i++) {
                star_html += (i < star_rate) ?
                    '<span><img src="images/star_rating.png" alt=""></span>' :
                    '<span><img src="images/star_rating_empty.png" alt=""></span>';
            }

            return `
            <div class="stars">
                ${star_html}
            </div>
            `;


        }


        // function price(regularPrice){
        //     let regular_Price = regularPrice;
        //     console.log(regular_Price);

        //     let price_html = '';


        // }
    </script>
</body>

</html>